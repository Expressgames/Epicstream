<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Playcentrix Draw</title>
<style>
html, body {
    margin: 0; padding: 0;
    width: 100%; height: 100%;
    overflow: hidden;
    background: #101010;
    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", sans-serif;
}
#drawCanvas {
    display: block;
    width: 100%;
    height: 100%;
    touch-action: none;
    background: #fff;
    cursor: crosshair;
}
#watermark {
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    color: rgba(0,0,0,0.1);
    font-size: 4rem;
    font-weight: bold;
    pointer-events: none;
    user-select: none;
    transition: opacity 0.3s;
}

.bottom-bar {
    position: absolute;
    bottom: 0;
    width: 100%;
    display: flex;
    justify-content: center;
    background: rgba(0,0,0,0.3);
    padding: 8px;
    gap: 10px;
}
.tool-btn {
    width: 50px; height: 50px;
    border-radius: 50%;
    border: none;
    background: rgba(255,255,255,0.1);
    color: #000;#42445A
    font-size: 1.2rem;
    cursor: pointer;
    backdrop-filter: blur(10px) saturate(180%);
    transition: background 0.2s;
}
.tool-btn:hover { background: rgba(255,255,255,0.2); }

#hamburger {
    position: absolute;
    top: 15px;
    right: 15px;
    width: 40px; height: 40px;
    background: rgba(255,255,255,0.1);
    border-radius: 10px;
    display: flex;
    flex-direction: column;
    justify-content: space-around;
    padding: 8px;
    cursor: pointer;
}
#hamburger div {
    height: 3px;
    background: #000;
    border-radius: 2px;
}

/* Modal */
#toolModal {
    position: fixed;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    width: 300px;
    background: rgba(20,20,20,0.95);
    backdrop-filter: blur(15px) saturate(180%);
    color: #fff;
    border-radius: 15px;
    display: none;
    flex-direction: column;
    padding: 20px;
    gap: 15px;
    z-index: 10;
}
#toolModal label { font-size: 0.9rem; }
#toolModal input[type=range], #toolModal input[type=color] { width: 100%; }
#closeModal { align-self: flex-end; cursor: pointer; font-weight: bold; }
</style>
</head>
<body>

<canvas id="drawCanvas"></canvas>
<div id="watermark">Playcentrix</div>

<div class="bottom-bar">
    <button class="tool-btn" id="penBtn">üñäÔ∏è</button>
    <button class="tool-btn" id="eraserBtn">ü©π</button>
    <button class="tool-btn" id="undoBtn">‚Ü©Ô∏è</button>
    <button class="tool-btn" id="redoBtn">‚Ü™Ô∏è</button>
    <button class="tool-btn" id="deleteBtn">üóëÔ∏è</button>
    <button class="tool-btn" id="saveBtn">üíæ</button>
</div>

<div id="hamburger">
    <div></div><div></div><div></div>
</div>

<div id="toolModal">
    <div id="closeModal">‚úñ</div>
    <label>Thickness: <span id="thicknessVal">2</span></label>
    <input type="range" id="thicknessRange" min="1" max="50" value="2">
    
    <label>Opacity: <span id="opacityVal">1</span></label>
    <input type="range" id="opacityRange" min="0.1" max="1" step="0.05" value="1">
    
    <label>Color</label>
    <input type="color" id="colorPicker" value="#000000">
    
    <label><input type="checkbox" id="fadeToggle"> Fade Mode</label>
</div>

<script>
const canvas = document.getElementById('drawCanvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let drawing = false;
let tool = 'pen';
let paths = [];
let undonePaths = [];
let currentPath = [];
let thickness = 2;
let color = '#000000';
let opacity = 1;
let fadeMode = false;
const watermark = document.getElementById('watermark');

function startDrawing(e){
    drawing = true;
    currentPath = [];
    undonePaths = [];
    watermark.style.opacity = 0;
    draw(e);
}
function draw(e){
    if(!drawing) return;
    let rect = canvas.getBoundingClientRect();
    let x = e.clientX || e.touches[0].clientX;
    let y = e.clientY || e.touches[0].clientY;
    x -= rect.left; y -= rect.top;
    currentPath.push({x, y, tool, thickness, color, opacity, fadeMode});
    redraw();
}
function stopDrawing(){
    if(!drawing) return;
    drawing = false;
    if(currentPath.length) paths.push(currentPath);
}
function redraw(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    paths.forEach(path=>{
        ctx.beginPath();
        path.forEach((p,i)=>{
            ctx.strokeStyle = (p.tool==='eraser') ? `rgba(255,255,255,${p.opacity})` :
                p.fadeMode ? `rgba(${hexToRgb(p.color)},${p.opacity})` : `rgba(${hexToRgb(p.color)},${p.opacity})`;
            ctx.lineWidth = (p.tool==='eraser') ? p.thickness*3 : p.thickness;
            ctx.lineCap='round';
            if(i===0) ctx.moveTo(p.x,p.y);
            else ctx.lineTo(p.x,p.y);
        });
        ctx.stroke();
    });
    if(currentPath.length){
        ctx.beginPath();
        currentPath.forEach((p,i)=>{
            ctx.strokeStyle = (p.tool==='eraser') ? `rgba(255,255,255,${p.opacity})` :
                p.fadeMode ? `rgba(${hexToRgb(p.color)},${p.opacity})` : `rgba(${hexToRgb(p.color)},${p.opacity})`;
            ctx.lineWidth = (p.tool==='eraser') ? p.thickness*3 : p.thickness;
            ctx.lineCap='round';
            if(i===0) ctx.moveTo(p.x,p.y);
            else ctx.lineTo(p.x,p.y);
        });
        ctx.stroke();
    }
}
function hexToRgb(hex){
    const bigint = parseInt(hex.slice(1),16);
    const r=(bigint>>16)&255;
    const g=(bigint>>8)&255;
    const b=bigint&255;
    return `${r},${g},${b}`;
}

// Event listeners
canvas.addEventListener('mousedown', startDrawing);
canvas.addEventListener('mousemove', draw);
canvas.addEventListener('mouseup', stopDrawing);
canvas.addEventListener('mouseleave', stopDrawing);
canvas.addEventListener('touchstart', startDrawing);
canvas.addEventListener('touchmove', draw);
canvas.addEventListener('touchend', stopDrawing);

// Tools
document.getElementById('penBtn').onclick = ()=>tool='pen';
document.getElementById('eraserBtn').onclick = ()=>tool='eraser';
document.getElementById('undoBtn').onclick = ()=>{if(paths.length) undonePaths.push(paths.pop()); redraw();}
document.getElementById('redoBtn').onclick = ()=>{if(undonePaths.length) paths.push(undonePaths.pop()); redraw();}
document.getElementById('deleteBtn').onclick = ()=>{paths=[]; undonePaths=[]; redraw(); watermark.style.opacity=1;};

// Save
document.getElementById('saveBtn').onclick = ()=>{
    const link=document.createElement('a');
    link.download='drawing.png';
    link.href=canvas.toDataURL();
    link.click();
};

// Hamburger modal
const hamburger = document.getElementById('hamburger');
const modal = document.getElementById('toolModal');
const closeModal = document.getElementById('closeModal');
hamburger.onclick = ()=>{ modal.style.display='flex'; };
closeModal.onclick = ()=>{ modal.style.display='none'; };

// Modal controls
const thicknessRange = document.getElementById('thicknessRange');
const thicknessVal = document.getElementById('thicknessVal');
thicknessRange.addEventListener('input', ()=>{ thickness=parseInt(thicknessRange.value); thicknessVal.textContent=thickness; });

const opacityRange = document.getElementById('opacityRange');
const opacityVal = document.getElementById('opacityVal');
opacityRange.addEventListener('input', ()=>{ opacity=parseFloat(opacityRange.value); opacityVal.textContent=opacity; });

const colorPicker = document.getElementById('colorPicker');
colorPicker.addEventListener('input', ()=>{ color=colorPicker.value; });

const fadeToggle = document.getElementById('fadeToggle');
fadeToggle.addEventListener('change', ()=>{ fadeMode=fadeToggle.checked; });

window.addEventListener('resize', ()=>{
    const imgData = ctx.getImageData(0,0,canvas.width,canvas.height);
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    ctx.putImageData(imgData,0,0);
});
</script>
</body>
</html>